<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>Visitor Entry / Exit Log</title>

<style>
body {
    margin: 0;
    font-family: "Segoe UI", Tahoma, sans-serif;
    background: #f2f4f7;
}

/* ===== Layout ===== */
.wrapper {
    display: flex;
    min-height: 100vh;
}

/* ===== Sidebar ===== */
.sidebar {
    width: 240px;
    background: #0d6efd;
    color: #fff;
    padding: 20px;
}

.sidebar h2 {
    text-align: center;
    margin-bottom: 30px;
}

.sidebar a {
    display: block;
    color: #fff;
    text-decoration: none;
    padding: 12px;
    border-radius: 6px;
    margin-bottom: 10px;
}

.sidebar a:hover,
.sidebar a.active {
    background: rgba(255,255,255,0.2);
}

/* ===== Main ===== */
.main {
    flex: 1;
    padding: 25px;
}

.container {
    max-width: 1200px;
    margin: auto;
    background: #fff;
    padding: 25px;
    border-radius: 10px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}

h2 {
    text-align: center;
    margin-bottom: 20px;
}

/* ===== Table ===== */
table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 15px;
}

th, td {
    border: 1px solid #ddd;
    padding: 8px;
    text-align: center;
}

th {
    background: #0d6efd;
    color: #fff;
}

tbody tr:nth-child(even) {
    background: #f9fafb;
}

input, textarea {
    width: 100%;
    padding: 6px;
    border-radius: 4px;
    border: 1px solid #ccc;
}

textarea {
    resize: vertical;
}

/* ===== Buttons ===== */
.buttons {
    display: flex;
    justify-content: space-between;
    margin-top: 15px;
}

button {
    padding: 10px 18px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
}

.save-btn { background: #198754; color: #fff; }
.print-btn { background: #6c757d; color: #fff; }
.clear-btn { background: #dc3545; color: #fff; }

@media print {
    .sidebar, .input-table, .buttons {
        display: none;
    }
}
</style>
</head>

<body>
 
<div class="wrapper">

    <!-- Sidebar -->
   <div class="sidebar">
        <h2>Office System</h2>
        <a href="index.html">üè† Dashboard</a>
        <a href="temperature.html">üå° Temperature Control</a>
        <a href="visitor.html">üõÇ Visitor Log</a>
        <a href="inventory.html">üìÅ Inventory</a>
        <a href="report.html">üñ® Reports</a>
        <a href="staff.html">üë• Staff</a>
         <a href="operationrule.html" class="active">üìú Operation Rules</a>
        <a href="quotation.html">üßæ Quotation</a>
        <a href="invoice.html">üßæ Invoice</a>
    </div>
    <!-- Main Content -->
    <div class="main">
        <div class="header">Dashboard ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏£‡∏∞‡∏ö‡∏ö</div>


<h2>‡∏™‡∏°‡∏∏‡∏î‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡πÄ‡∏Ç‡πâ‡∏≤ ‚Äì ‡∏≠‡∏≠‡∏Å</h2>

<!-- ===== History Table ===== -->
<table id="logTable">
<thead>
<tr>
    <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
    <th>‡∏ä‡∏∑‡πà‡∏≠</th>
    <th>‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</th>
    <th>‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ</th>
    <th>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£</th>
    <th>‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤</th>
    <th>‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏≠‡∏Å</th>
    <th>‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå</th>
</tr>
</thead>
<tbody></tbody>
</table>

<!-- ===== Input Table ===== -->
<table class="input-table">
<tr>
    <td><input type="date" id="date"></td>
    <td><input type="text" id="firstName" placeholder="‡∏ä‡∏∑‡πà‡∏≠"></td>
    <td><input type="text" id="lastName" placeholder="‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•"></td>
    <td><input type="text" id="carPlate" placeholder="‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ"></td>
    <td><input type="tel" id="phone" placeholder="‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£"></td>
    <td><input type="time" id="timeIn"></td>
    <td><input type="time" id="timeOut"></td>
    <td><textarea id="purpose" rows="1" placeholder="‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå"></textarea></td>
</tr>
</table>

<div class="buttons">
    <button class="save-btn" onclick="saveData()">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
    <button class="print-btn" onclick="window.print()">üñ® ‡∏û‡∏¥‡∏°‡∏û‡πå</button>
    <button class="clear-btn" onclick="clearData()">üóë ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
</div>

</div>
</div>
</div>

<script>
let visitors = JSON.parse(localStorage.getItem("visitorLogs")) || [];

/* ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ */
document.getElementById("date").valueAsDate = new Date();

/* ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• */
function renderTable() {
    const tbody = document.querySelector("#logTable tbody");
    tbody.innerHTML = "";

    visitors.slice().reverse().forEach(v => {
        tbody.innerHTML += `
        <tr>
            <td>${v.date}</td>
            <td>${v.firstName}</td>
            <td>${v.lastName}</td>
            <td>${v.carPlate || "-"}</td>
            <td>${v.phone || "-"}</td>
            <td>${v.timeIn}</td>
            <td>${v.timeOut || "-"}</td>
            <td>${v.purpose || "-"}</td>
        </tr>`;
    });
}

/* ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å */
function saveData() {
    const data = {
        date: date.value,
        firstName: firstName.value.trim(),
        lastName: lastName.value.trim(),
        carPlate: carPlate.value.trim(),
        phone: phone.value.trim(),
        timeIn: timeIn.value,
        timeOut: timeOut.value,
        purpose: purpose.value.trim()
    };

    if (!data.date || !data.firstName || !data.timeIn) {
        alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà / ‡∏ä‡∏∑‡πà‡∏≠ / ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤");
        return;
    }

    if (data.phone && !/^[0-9]{9,10}$/.test(data.phone)) {
        alert("‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");
        return;
    }

    visitors.push(data);
    localStorage.setItem("visitorLogs", JSON.stringify(visitors));
    renderTable();

    document.querySelectorAll(".input-table input, .input-table textarea")
        .forEach(el => el.value = "");
}

/* ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• */
function clearData() {
    if (confirm("‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")) {
        localStorage.removeItem("visitorLogs");
        visitors = [];
        renderTable();
    }
}

renderTable();
</script>

</body>
</html>
